const translations = {
    en: {
        // Navigation
        "nav.home": "Home",
        "nav.doctors": "Find Doctors",
        "nav.appointments": "My Appointments",
        "nav.signin": "Sign In",

        // Hero
        "hero.badge": "Trusted by 10,000+ patients",
        "hero.title": "Book Your Doctor Appointment",
        "hero.title.highlight": "With Ease",
        "hero.dev": "This is a demo application",
        "hero.description": "Find the best doctors, schedule appointments, and manage your healthcare journey all in one place. Experience seamless healthcare booking with verified professionals.",
        "hero.stats.specialists": "Specialists",
        "hero.stats.patients": "Patients",
        "hero.stats.rating": "Rating",
        "hero.cta.book": "Book Appointment",
        "hero.cta.learn": "Learn More",
        "hero.trust.hipaa": "HIPAA Compliant",
        "hero.trust.verified": "Verified Doctors",
        "hero.trust.secure": "Secure Platform",
        "hero.preview.available": "Available Today",
        "hero.preview.book": "Book Now",

        // Testimonials
        "testimonials.tag": "Testimonials",
        "testimonials.title": "What Our Patients Say",
        "testimonials.subtitle": "Real experiences from patients who have trusted us with their healthcare needs",
        "testimonials.1.text": "MedSchedule made booking my appointment so easy! The interface is intuitive and I found the perfect specialist within minutes.",
        "testimonials.2.text": "As a busy professional, I appreciate the 24/7 booking feature. The reminder system is a lifesaver!",
        "testimonials.3.text": "The video consultation option is fantastic. I could speak with my doctor from the comfort of my home.",
        "testimonials.patient.role": "Patient since",

        // Doctors Section
        "doctors.tag": "Our Doctors",
        "doctors.title": "Find Your Specialist",
        "doctors.subtitle": "Browse through our network of experienced healthcare professionals and book your appointment today",
        "doctors.filter.specialty": "Specialty",
        "doctors.filter.all": "All Specialties",
        "doctors.search.label": "Search",
        "doctors.search.placeholder": "Search doctors...",
        "doctors.empty.title": "No doctors found",
        "doctors.empty.desc": "Try adjusting your filters or search terms",
        "doctors.error.title": "Failed to load doctors",
        "doctors.error.desc": "Please refresh the page to try again",

        // Doctor Card
        "doctor.wait": "min wait",
        "doctor.experience": "years",
        "doctor.book": "Book Now",
        "doctor.profile": "View Profile",
        "doctor.reviews": "reviews",
        "doctor.no_bio": "No bio available",

        // Appointments Section
        "appointments.tag": "Your Health",
        "appointments.title": "My Appointments",
        "appointments.subtitle": "View and manage your upcoming and past appointments",

        // Login
        "login.title": "Access Your Appointments",
        "login.subtitle": "Enter your email to view your appointment history and manage bookings",
        "login.email.label": "Email Address",
        "login.email.placeholder": "your@email.com",
        "login.btn": "View Appointments",
        "login.welcome": "Welcome back,",
        "login.signout": "Sign Out",

        // Appointments List
        "appointments.upcoming": "Upcoming Appointment",
        "appointments.upcoming_desc": "You have an appointment in less than 24 hours",
        "appointments.empty.title": "No appointments yet",
        "appointments.empty.desc": "Book your first appointment to get started",
        "appointments.status.scheduled": "Scheduled",
        "appointments.status.completed": "Completed",
        "appointments.status.cancelled": "Cancelled",
        "appointments.status.rescheduled": "Rescheduled",
        "appointments.action.reschedule": "Reschedule",
        "appointments.action.cancel": "Cancel",
        "appointments.action.review": "Leave Review",

        // Footer
        "footer.tagline": "Your trusted partner for seamless healthcare appointments. Connecting patients with verified healthcare professionals since 2023.",
        "footer.quicklinks": "Quick Links",
        "footer.contact": "Contact Us",
        "footer.newsletter": "Stay Updated",
        "footer.newsletter.desc": "Subscribe to our newsletter for health tips and updates.",
        "footer.newsletter.placeholder": "Enter your email",
        "footer.subscribe": "Subscribe",
        "footer.rights": "MedSchedule. All rights reserved.",
        "footer.privacy": "Privacy Policy",
        "footer.terms": "Terms of Service",
        "footer.cookie": "Cookie Policy",

        // Modals
        "modal.booking.title": "Book Appointment",
        "modal.type.inperson": "In-Person",
        "modal.type.inperson.desc": "Clinic visit",
        "modal.type.video": "Video Call",
        "modal.type.video.desc": "Online consultation",
        "modal.type.phone": "Phone",
        "modal.type.phone.desc": "Voice call",
        "modal.form.fname": "First Name",
        "modal.form.lname": "Last Name",
        "modal.form.email": "Email",
        "modal.form.phone": "Phone Number",
        "modal.form.date": "Date",
        "modal.form.time": "Time",
        "modal.form.reason": "Reason for Visit",
        "modal.form.reason.placeholder": "Briefly describe your symptoms or reason for visit...",
        "modal.btn.confirm": "Confirm Booking",
        "modal.preview.title": "Booking Confirmation Preview",
        "modal.preview.desc": "A confirmation email will be sent to your inbox",

        // Reschedule
        "modal.reschedule.title": "Reschedule Appointment",
        "modal.reschedule.confirm": "Confirm Reschedule",

        // Review
        "modal.review.title": "Write a Review",
        "modal.review.rating": "Rating",
        "modal.review.comment": "Comment",
        "modal.review.submit": "Submit Review",

        // Toasts
        "toast.theme.switched": "Switched to {theme} mode",
        "toast.favorite.added": "Added to favorites",
        "toast.favorite.removed": "Removed from favorites",
        "toast.load.error": "Failed to load {item}",
        "toast.booking.success": "Appointment booked successfully!",
        "toast.cancel.success": "Appointment cancelled successfully",
        "toast.reschedule.success": "Appointment rescheduled successfully!",
        "toast.review.success": "Review submitted successfully!",

        "modal.cancel.confirm": "Are you sure you want to cancel this appointment?",
        "appointments.upcoming_desc_doctor": "You have an appointment with {doctor} in",
        "minutes": "minutes",
        "hours": "hours",

        "day.monday": "Monday",
        "day.tuesday": "Tuesday",
        "day.wednesday": "Wednesday",
        "day.thursday": "Thursday",
        "day.friday": "Friday",
        "day.saturday": "Saturday",
        "day.sunday": "Sunday",

        "day.short.sun": "Sun",
        "day.short.mon": "Mon",
        "day.short.tue": "Tue",
        "day.short.wed": "Wed",
        "day.short.thu": "Thu",
        "day.short.fri": "Fri",
        "day.short.sat": "Sat",

        "month.january": "January",
        "month.february": "February",
        "month.march": "March",
        "month.april": "April",
        "month.may": "May",
        "month.june": "June",
        "month.july": "July",
        "month.august": "August",
        "month.september": "September",
        "month.october": "October",
        "month.november": "November",
        "month.december": "December",

        "modal.review.comment.placeholder": "Share your experience with this doctor...",

        "detail.about": "About",
        "detail.experience": "Experience",
        "detail.wait": "Wait Time",
        "detail.phone": "Phone",
        "detail.availability": "Availability",
        "detail.reviews": "Patient Reviews",
        "detail.reviews.empty": "No reviews yet.",
        "detail.unavailable": "Not Available",
    },
    ro: {
        // Navigation
        "nav.home": "Acasă",
        "nav.doctors": "Caută Doctori",
        "nav.appointments": "Programările Mele",
        "nav.signin": "Autentificare",

        // Hero
        "hero.badge": "De încredere pentru 10.000+ pacienți",
        "hero.title": "Programează-te la Doctor",
        "hero.title.highlight": "Cu Ușurință",
        "hero.dev": "Aceasta este o aplicație demo",
        "hero.description": "Găsește cei mai buni doctori, programează consultații și gestionează-ți sănătatea într-un singur loc. Experimentează programări medicale fără efort cu profesioniști verificați.",
        "hero.stats.specialists": "Specialiști",
        "hero.stats.patients": "Pacienți",
        "hero.stats.rating": "Rating",
        "hero.cta.book": "Fă o Programare",
        "hero.cta.learn": "Află Mai Multe",
        "hero.trust.hipaa": "Conform HIPAA",
        "hero.trust.verified": "Doctori Verificați",
        "hero.trust.secure": "Platformă Sigură",
        "hero.preview.available": "Disponibil Azi",
        "hero.preview.book": "Rezervă",

        // Testimonials
        "testimonials.tag": "Testimoniale",
        "testimonials.title": "Ce Spun Pacienții Noștri",
        "testimonials.subtitle": "Experiențe reale de la pacienți care ne-au încredințat nevoile lor medicale",
        "testimonials.1.text": "MedSchedule a făcut programarea atât de ușoară! Interfața este intuitivă și am găsit specialistul perfect în câteva minute.",
        "testimonials.2.text": "Ca profesionist ocupat, apreciez funcția de rezervare 24/7. Sistemul de reamintire este salvator!",
        "testimonials.3.text": "Opțiunea de consultație video este fantastică. Am putut vorbi cu doctorul meu din confortul casei.",
        "testimonials.patient.role": "Pacient din",

        // Doctors Section
        "doctors.tag": "Doctorii Noștri",
        "doctors.title": "Găsește Specialistul Tău",
        "doctors.subtitle": "Răsfoiește rețeaua noastră de profesioniști în sănătate și fă-ți o programare astăzi",
        "doctors.filter.specialty": "Specialitate",
        "doctors.filter.all": "Toate Specialitățile",
        "doctors.search.label": "Căutare",
        "doctors.search.placeholder": "Caută doctori...",
        "doctors.empty.title": "Niciun doctor găsit",
        "doctors.empty.desc": "Încearcă să ajustezi filtrele sau termenii de căutare",
        "doctors.error.title": "Nu s-au putut încărca doctorii",
        "doctors.error.desc": "Te rugăm să reîncarci pagina pentru a încerca din nou",

        // Doctor Card
        "doctor.wait": "min timp așteptare",
        "doctor.experience": "ani",
        "doctor.book": "Rezervă Acum",
        "doctor.profile": "Vezi Profil",
        "doctor.reviews": "recenzii",
        "doctor.no_bio": "Fără biografie disponibilă",

        // Appointments Section
        "appointments.tag": "Sănătatea Ta",
        "appointments.title": "Programările Mele",
        "appointments.subtitle": "Vezi și gestionează programările viitoare și trecute",

        // Login
        "login.title": "Accesează Programările",
        "login.subtitle": "Introdu adresa de email pentru a vedea istoricul programărilor și a gestiona rezervările",
        "login.email.label": "Adresa de Email",
        "login.email.placeholder": "nume@email.com",
        "login.btn": "Vezi Programări",
        "login.welcome": "Bine ai revenit,",
        "login.signout": "Deconectare",

        // Appointments List
        "appointments.upcoming": "Programare Viitoare",
        "appointments.upcoming_desc": "Ai o programare în mai puțin de 24 de ore",
        "appointments.empty.title": "Nicio programare încă",
        "appointments.empty.desc": "Fă prima ta programare pentru a începe",
        "appointments.status.scheduled": "Programat",
        "appointments.status.completed": "Finalizat",
        "appointments.status.cancelled": "Anulat",
        "appointments.status.rescheduled": "Reprogramat",
        "appointments.action.reschedule": "Reprogramează",
        "appointments.action.cancel": "Anulează",
        "appointments.action.review": "Lasă Recenzie",

        // Footer
        "footer.tagline": "Partenerul tău de încredere pentru programări medicale fără probleme. Conectăm pacienții cu profesioniști verificați din 2023.",
        "footer.quicklinks": "Linkuri Rapide",
        "footer.contact": "Contact",
        "footer.newsletter": "Rămâi la Curent",
        "footer.newsletter.desc": "Abonează-te la newsletter-ul nostru pentru sfaturi de sănătate și noutăți.",
        "footer.newsletter.placeholder": "Introdu email-ul tău",
        "footer.subscribe": "Abonează-te",
        "footer.rights": "MedSchedule. Toate drepturile rezervate.",
        "footer.privacy": "Politica de Confidențialitate",
        "footer.terms": "Termeni și Condiții",
        "footer.cookie": "Politica Cookie",

        // Modals
        "modal.booking.title": "Fă o Programare",
        "modal.type.inperson": "Fizic",
        "modal.type.inperson.desc": "Vizită la clinică",
        "modal.type.video": "Apel Video",
        "modal.type.video.desc": "Consultație online",
        "modal.type.phone": "Telefon",
        "modal.type.phone.desc": "Apel voce",
        "modal.form.fname": "Prenume",
        "modal.form.lname": "Nume",
        "modal.form.email": "Email",
        "modal.form.phone": "Număr Telefon",
        "modal.form.date": "Data",
        "modal.form.time": "Ora",
        "modal.form.reason": "Motivul Vizitei",
        "modal.form.reason.placeholder": "Descrie pe scurt simptomele sau motivul vizitei...",
        "modal.btn.confirm": "Confirmă Programarea",
        "modal.preview.title": "Previzualizare Confirmare",
        "modal.preview.desc": "Un email de confirmare va fi trimis în inbox-ul tău",

        // Reschedule
        "modal.reschedule.title": "Reprogramează",
        "modal.reschedule.confirm": "Confirmă Reprogramarea",

        // Review
        "modal.review.title": "Scrie o Recenzie",
        "modal.review.rating": "Rating",
        "modal.review.comment": "Comentariu",
        "modal.review.submit": "Trimite Recenzie",

        // Toasts
        "toast.theme.switched": "Schimbat la modul {theme}",
        "toast.favorite.added": "Adăugat la favorite",
        "toast.favorite.removed": "Eliminat de la favorite",
        "toast.load.error": "Eșec la încărcarea {item}",
        "toast.booking.success": "Programare realizată cu succes!",
        "toast.cancel.success": "Programare anulată cu succes",
        "toast.reschedule.success": "Programare reprogramată cu succes!",
        "toast.review.success": "Recenzie trimisă cu succes!",

        "modal.cancel.confirm": "Ești sigur că vrei să anulezi această programare?",
        "appointments.upcoming_desc_doctor": "Ai o programare cu {doctor} în",
        "minutes": "minute",
        "hours": "ore",

        "day.monday": "Luni",
        "day.tuesday": "Marți",
        "day.wednesday": "Miercuri",
        "day.thursday": "Joi",
        "day.friday": "Vineri",
        "day.saturday": "Sâmbătă",
        "day.sunday": "Duminică",

        "day.short.sun": "Dum",
        "day.short.mon": "Lun",
        "day.short.tue": "Mar",
        "day.short.wed": "Mie",
        "day.short.thu": "Joi",
        "day.short.fri": "Vin",
        "day.short.sat": "Sâm",

        "month.january": "Ianuarie",
        "month.february": "Februarie",
        "month.march": "Martie",
        "month.april": "Aprilie",
        "month.may": "Mai",
        "month.june": "Iunie",
        "month.july": "Iulie",
        "month.august": "August",
        "month.september": "Septembrie",
        "month.october": "Octombrie",
        "month.november": "Noiembrie",
        "month.december": "Decembrie",

        "modal.review.comment.placeholder": "Împărtășește experiența ta cu acest doctor...",

        "detail.about": "Despre",
        "detail.experience": "Experiență",
        "detail.wait": "Timp Așteptare",
        "detail.phone": "Telefon",
        "detail.availability": "Disponibilitate",
        "detail.reviews": "Recenzii Pacienți",
        "detail.reviews.empty": "Nicio recenzie încă.",
        "detail.unavailable": "Indisponibil",
    }
};

class LanguageManager {
    constructor() {
        this.currentLang = localStorage.getItem('language') || 'en';
        this.translations = translations;
    }

    setLanguage(lang) {
        if (this.translations[lang]) {
            this.currentLang = lang;
            localStorage.setItem('language', lang);
            this.updatePage();

            // Dispatch event for other components
            window.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));

            // Re-render components that might have static text rendered via JS
            if (typeof renderSpecialtyFilter === 'function') renderSpecialtyFilter();
            if (typeof AppState !== 'undefined') {
                if (AppState.doctors && AppState.doctors.length > 0) renderDoctors(AppState.doctors);
                if (AppState.currentPatientEmail) loadPatientAppointments(); // Reload to refresh text
            }
        }
    }

    t(key, params = {}) {
        let text = this.translations[this.currentLang][key] || key;

        // Replace params like {theme}
        Object.keys(params).forEach(param => {
            text = text.replace(`{${param}}`, params[param]);
        });

        return text;
    }

    updatePage() {
        // Update elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = this.t(key);

            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                if (element.getAttribute('placeholder')) {
                    // Check if we should translate placeholder (maybe convention data-i18n-placeholder)
                }
            } else {
                element.textContent = translation;
            }
        });

        // Handle placeholders explicitly
        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            element.placeholder = this.t(key);
        });

        // Update specific attributes like aria-label if needed
    }
}

const langManager = new LanguageManager();
window.t = langManager.t.bind(langManager);
window.langManager = langManager;

// Init on load
document.addEventListener('DOMContentLoaded', () => {
    langManager.updatePage();
});
